#!/bin/bash -ex

go install -v github.com/onsi/ginkgo/ginkgo

go list github.com/cloudfoundry-incubator/bits-service-migration-tests/... \
  | grep -v github.com/cloudfoundry-incubator/bits-service-migration-tests/assets \
  | grep -v vendor \
  | xargs -I {} go test -c {}

# List of suites is passed in as a single string, so we need to re-split the argument
# The only alternative would be to split the string and then re-build the args for ginkgo
# Instead, we'll simply not add quotes around $@
# shellcheck disable=SC2068
ginkgo $@
